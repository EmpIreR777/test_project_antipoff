## Описание проекта

Этот проект представляет собой веб-приложение, разработанное с использованием FastAPI, SQLAlchemy и PostgreSQL. Приложение предоставляет функциональность для регистрации и авторизации пользователей, управления ролями, а также выполнения запросов к кадастровым номерам. Проект также включает админ-панель для управления данными.


## Сильные стороны проекта
- **Масштабируемость:**
Использование асинхронных технологий (FastAPI, asyncpg) для высокой производительности.
Модульная структура кода, позволяющая легко добавлять новые функции.
- **Безопасность:**
Хэширование паролей с использованием bcrypt.
JWT-токены для аутентификации пользователей через куки.
Проверка email на корректность с помощью email-validator.
- **Документация:**
Подробная документация API с использованием Swagger.
http://127.0.0.1:5000/docs#
- **Администрирование:**
Интеграция SQLAdmin для удобного управления данными через веб-интерфейс.http://127.0.0.1:5000/admin/
- **Тестирование:**
Написаны unit-тесты для проверки основных функций приложения.
Легко запускать тесты с помощью команды pytest.
- **Миграции:**
Использование Alembic для управления миграциями базы данных.
Автоматическая проверка подключения к базе данных перед выполнением миграций.
- **Контейнеризация:**
Docker Compose для быстрого развертывания приложения и базы данных.
- **Логирование:**
Настроено логирование для отслеживания ошибок и состояния системы.


## Установка и запуск

### Установка

1. Клонируйте репозиторий:

    ```bash
    git clone git@github.com:EmpIreR777/test_project_antipoff.git
    ```

2. Создайте файл `.env` в корне проекта и заполните его по примеру `.env.example`:

    ```env
    SECRET_KEY=gV64m9aIzFG4qpgVphvQbPQrtAO0nM-7YwwOvu0XPt5KJOjAy4AfgLkqJXYEt
    ALGORITHM=HS256
    POSTGRES_USER=postgre_user
    POSTGRES_PASSWORD=postgre_password
    POSTGRES_DB=postgres_db
    POSTGRES_HOST=db
    POSTGRES_PORT=5432
    ```
3. Запустите проект с помощью Docker:

    ```bash
    docker-compose up --build
    ```
- **Рекомендую использовать makefile для удобства**

### Запуск без Docker

1. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

2. Запустите миграции:

    ```bash
    alembic upgrade head
    ```

3. Запустите приложения:

    ```bash
    uvicorn app.main:app --port 3000 --reload
    ```

### Администрирование

Для управления данными используется административная панель, доступная по адресу /admin. Для входа в панель администратора необходимо использовать учетные данные, указанные в базе данных.
    ```
    http://127.0.0.1:3000/admin/
    ```
#### Модели в админ-панели

- **Запросы**: Управление запросами.
- **Ответы**: Управление ответами.
- **Пользователи**: Управление пользователями.
- **Роли**: Управление ролями для пользователя.

#### **Используемые технологии**

| Технология    | Описание                                     |
|---------------|----------------------------------------------|
| **Python**    | Основной язык программирования.              |
| **SQLAlchemy**| ORM для работы с базой данных.                |
| **Alembic**   | Управление миграциями базы данных.           |
| **sqladmin**   | Админка для приложения.       |
| **Docker-compose**    | Контейнеризация приложения.                  |


#### **Структура проекта**

| Каталог      | Описание                                     |
|--------------|----------------------------------------------|
| **auth/**      | Логика работы с пользователем.                      |
| **admin_panel**       | Модули для админ-панели.                      |
| **migration**   | Управление миграциями базы данных.           |
| **dao/**        | dao-операции для работы с базой данных.      |
| **db/**          | Модули для работы с базой данных.             |
| **db/models/**      | Модели базы данных.                            |
| **dependencies/**   | Зависимости для роутеров.           |
| **services/**       | Бизнес логика.             |
| **core/config**      | Файл конфигурация приложения.                      |
| **main**      | Файл для запуска приложения.                      |
| **migrations**      | Запуск миграций и проверка на их создание.                      |
| **tests/**      | Файл для запуска тестов.                      |


### Дополнительно
- Docker Compose: Все сервисы (PostgreSQL, приложение) настроены для работы через Docker Compose, проверка работы бызы данных и выполнения миграции в файле migrations.py.
- Alembic: Отдельная директория migration содержит все миграции для базы данных.
- Логирование: Логи записываются в консоль и могут быть расширены для записи в файлы.
